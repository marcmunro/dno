<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Chapter 5. The Dno Directory System</title>
<link rel="stylesheet" type="text/css" href="dno.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.2">
<link rel="home" href="index.html" title="Dno (0.9.1) User Guide">
<link rel="up" href="index.html" title="Dno (0.9.1) User Guide">
<link rel="prev" href="ch04.html" title="Chapter 4. A Little Exploration">
<link rel="next" href="ch06.html" title="Chapter 6. Libraries">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 5. The Dno Directory System</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch04.html">Prev</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="ch06.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="directory-system"></a>Chapter 5. The Dno Directory System</h1></div></div></div>
<p>
    Each dno project must have its own set of directories.  This
    section describes the organisation of a dno directory system.
  </p>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="project_dir"></a>5.1. The Project/Root Directory</h2></div></div></div>
<p>
      This is the core of a dno project.  The name of this directory
      is the name of the project.  It can contain the following
      subdirectories:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	  board subdirectories;
	</li>
<li class="listitem">
	  library subdirectories;
	</li>
<li class="listitem">
	  a documentation subdirectory;
	</li>
<li class="listitem">
	  a <code class="literal">tests</code> subdirectory;
	</li>
<li class="listitem">
	  a <code class="literal">build</code> subdirectory.
	</li>
</ul></div>
<p>
    </p>
<p>
      It may also contain the following types of file:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	  sketch source code and header files;
	</li>
<li class="listitem">
	  a <code class="literal">BOARD_TYPE</code> file;
	</li>
<li class="listitem">
	  a <code class="literal">BOARD_INFO</code> file;
	</li>
<li class="listitem">
	  a <code class="literal">BOARD_OPTIONS</code> file.
	</li>
</ul></div>
<p>
    </p>
<p>
      This directory will normally only contain the various
      <code class="literal">BOARD_XXX</code> files and the
      <code class="literal">build</code> subdirectory if there are no board
      subdirectories.
    </p>
<p>
      For any project other than the smallest and simplest it is
      better to use board subdirectories and do all compilations
      there.
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm662"></a>5.1.1. 
	Running <code class="literal">dno</code> in the Project/Root Directory
      </h3></div></div></div>
<p>
	There are two significant, explicit dno targets that can be
	run in the Project/Root directory:
	</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	    tests (aka test, unit, unit_test);
	    <p>
	      Unit tests can be provided for libraries in explicit
	      test directories.  Running <code class="literal">dno</code> with
	      an explicit "tests", "test", "unit" or "unit_test" target,
	      will seek out those libraries that have unit tests, and
	      run those unit tests, compiling and linking them first,
	      if needed.
	    </p>
</li>
<li class="listitem">
	    docs.
	    <p>
	      The docs target attempts to build
	      <code class="literal">Doxygen</code> documentation for the <a class="link" href="ch07.html#building_docs" title="7.3. Building Documentation">whole project</a>.
	    </p>
</li>
</ul></div>
<p>
      </p>
<p>
	Running <code class="literal">dno</code> without an explicit target in
	the project/root directory will perform different actions
	depending on circumstances.
      </p>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm676"></a>5.1.1.1. With a <code class="literal">BOARD_TYPE</code> File</h4></div></div></div>
<p>
	  When a <code class="literal">BOARD_TYPE</code> file is present in the
	  project directory, <code class="literal">dno</code> will attempt to
	  compile and link your code, creating a <code class="literal">build
	  directory</code>.
	</p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm683"></a>5.1.1.2. Without a <code class="literal">BOARD_TYPE</code> File</h4></div></div></div>
<p>
	  In the absence of a <code class="literal">BOARD_TYPE</code> file in the
	  project directory, <code class="literal">dno</code> will not be able
	  to build anything:
	  </p>
<pre class="programlisting">
blink$ dno
Nothing to be done here (in .../blink).
Try dno ./BOARD_TYPE or dno tests
blink$ 
	  </pre>
<p>
	</p>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="board_dir"></a>5.2. Board Subdirectories</h2></div></div></div>
<p>
      A board subdirectory is used as the home directory for builds
      for a specific board.  The name of the directory providing the
      <a class="link" href="ch04.html#board_type" title="4.3.  The BOARD_TYPE File, And Board Types">board type</a>.
    </p>
<p>
      Usually all sketch source and header files will be placed in the
      project root directory, however, if board-specific customisations
      are required, modified versions of source files can be placed in
      these directories.  The local version of any file always takes
      precedence over the project directory's version.
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm695"></a>5.2.1. Running <code class="literal">dno</code> in a Board Directory</h3></div></div></div>
<p>
	Running <code class="literal">dno</code> without an explicit target in a
	board directory will compile and link any code that needs to
	be compiled/linked.  As always, the object files, etc, will be
	created in a directory called <code class="literal">build</code>.
      </p>
<p>
	Explicit targets that you are likely to use in a board
	directory include:
	</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	    upload;
	    <p>
	      This will attempt to upload the latest executable to a
	      connected Arduino board.  See
	      <a class="link" href="ch03.html#upload" title="3.5. Uploading To A Board">Uploading To A Board</a>.
	    </p>
</li>
<li class="listitem">
	    eeprom.
	    <p>
	      This will attempt to upload an eeprom image to a 
	      connected Arduino board.  See
	      <a class="link" href="ch08.html#eeprom" title="8.6. EEPROMs">EEPROMs</a>.
	    </p>
</li>
</ul></div>
<p>
      </p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="idm709"></a>5.3. Library Subdirectories</h2></div></div></div>
<p>
      A library subdirectory contains the source code for a library.
      This may be a locally modified version of one of the standard
      libraries, or a fully custom library.
    </p>
<p>
      The distinguishing feature of a Library Subdirectory is that it
      will contain a source file with the same basename as that of the
      directory itself.  Eg, if your library is named
      <code class="literal">Deferal</code>, there will be a source file called
      <code class="literal">Deferal.cpp</code> or <code class="literal">Deferal.c</code>.
    </p>
<p>
      Note that some libraries, generally those that contain a lot of
      code, may use an explicit <code class="literal">src</code> directory to
      contain the source code.
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm718"></a>5.3.1. Running <code class="literal">dno</code> in a Library Directory</h3></div></div></div>
<p>
	Running <code class="literal">dno</code> without an explicit target in a
	library subdirectory will attempt to build and run any unit
	tests that been have defined.  See <a class="link" href="ch06.html#unit_tests" title="6.2.1. Unit Testing With Dno">Unit Testing With Dno</a>.
      </p>
<p>
	If no unit tests have been defined, <code class="literal">dno</code>
	will warn the user and then do nothing.
      </p>
<p>
	The only significant explicit target that makes sense to use
	in a library subdirectory is <code class="literal">docs</code>.  You can
	also use <code class="literal">test, tests, unit or unit_test</code> but
	since these do the same as the implicit target, there is
	little point.  The docs target will attempt to create
	stand-alone documentation for the library using Doxygen.
      </p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="idm729"></a>5.4. The docs Subdirectory</h2></div></div></div>
<p>
      The docs subdirectory is where Doxygen-based documentation will
      be prepared.  Documentation created here will be for everything
      within the project, and will include libraries, even if those
      libraries have their own separate library specific documentation.
    </p>
<p>
      This is covered in detail in <a class="link" href="ch07.html" title="Chapter 7. Documentation with Doxygen">Documentation with Doxygen</a>.
    </p>
<p>
      Note that individual libraries may also contain docs
      directories.  These are for library-specific documentation.
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm735"></a>5.4.1. 
	Running <code class="literal">dno</code> in a <code class="literal">docs</code>
	Directory
      </h3></div></div></div>
<p>
	The only target that makes sense in the docs subdirectory is
	the <code class="literal">docs</code> target.  Running
	<code class="literal">dno</code> without an explicit target will do
	exactly the same thing.
      </p>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch04.html">Prev</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="ch06.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 4. A Little Exploration </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 6. Libraries</td>
</tr>
</table>
</div>
</body>
</html>
